"use strict";(self.webpackChunkarcgis_node=self.webpackChunkarcgis_node||[]).push([[4607],{24607:(s,e,i)=>{i.r(e),i.d(e,{default:()=>_});var t=i(82392),a=i(3132),n=i(62991),l=i(57725),r=i(37623),o=i(61985),y=i(81482),h=i(26325),w=i(93766),d=i(40377);i(6273),i(80861),i(67498);const c=s=>{let e=class extends s{constructor(...s){super(...s),this.layer=null}get interactive(){return null!=this.analysisView&&this.analysisView.interactive}set interactive(s){null!=this.analysisView&&(this.analysisView.interactive=s)}get results(){return null!=this.analysisView?this.analysisView.results:new d.A}get selectedDimension(){return null!=this.analysisView?this.analysisView.selectedDimension:null}set selectedDimension(s){null!=this.analysisView&&(this.analysisView.selectedDimension=s)}async createLengthDimensions(s){if(null==this.analysisView)throw(0,r.NK)();await this.analysisView.createLengthDimensions(s)}};return(0,t._)([(0,y.MZ)()],e.prototype,"layer",void 0),(0,t._)([(0,y.MZ)()],e.prototype,"interactive",null),(0,t._)([(0,y.MZ)({readOnly:!0})],e.prototype,"results",null),(0,t._)([(0,y.MZ)()],e.prototype,"selectedDimension",null),e=(0,t._)([(0,h.$)("esri.views.layers.DimensionLayerView")],e),e};var u=i(24775);const p="analysis-view-handles";let V=class extends((0,w.w)(c(u.A))){constructor(s){super(s),this.type="dimension-3d",this._analysisModule=null}initialize(){this.addHandles((0,o.wB)((()=>this.layer.source),(s=>{this._destroyAnalysisView(),null!=s&&this._createAnalysisView(s)}),o.pc),p)}destroy(){this.removeHandles(p),this._destroyAnalysisView()}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}async whenAnalysisView(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new n.A("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")}_createAnalysisView(s){const e=(0,a.UT)((async i=>(this.analysisView=await this._createAnalysisViewPromise(s,i),this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null),this.analysisView)));this.addResolvingPromise(e.promise),this._createAnalysisViewTask=e}_destroyAnalysisView(){this.analysisView=(0,l.pR)(this.analysisView),this._createAnalysisViewTask=(0,l.DC)(this._createAnalysisViewTask)}async _createAnalysisViewPromise(s,e){let i=this._analysisModule;if(null==i){const s=await this._loadAnalysisModule();this._analysisModule=s,i=s}const t=new i.default({analysis:s,view:this.view,parent:this});if(await t.when(),(0,r.G4)(e))throw t.destroy(),(0,r.NK)();return t}_loadAnalysisModule(){return Promise.all([i.e(3243),i.e(2101),i.e(5351),i.e(4973),i.e(3948),i.e(6747)]).then(i.bind(i,16747))}};(0,t._)([(0,y.MZ)()],V.prototype,"type",void 0),(0,t._)([(0,y.MZ)()],V.prototype,"analysisView",void 0),(0,t._)([(0,y.MZ)()],V.prototype,"_createAnalysisViewTask",void 0),V=(0,t._)([(0,h.$)("esri.views.3d.layers.DimensionLayerView3D")],V);const _=V},93766:(s,e,i)=>{i.d(e,{w:()=>h});var t=i(82392),a=i(70214),n=i(37623),l=i(61985),r=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),y=i(4197);const h=s=>{let e=class extends s{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,y.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const s=new AbortController,e=s.signal;this.addHandles((0,a.hA)((()=>s.abort()))),await(0,l.C_)((()=>this.view.defaultsFromMap?.heightModelInfoReady),e),(0,n.Te)(e);const i=(0,y.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return(0,t._)([(0,r.MZ)()],e.prototype,"view",void 0),(0,t._)([(0,r.MZ)()],e.prototype,"slicePlaneEnabled",void 0),e=(0,t._)([(0,o.$)("esri.views.3d.layers.LayerView3D")],e),e}}}]);