"use strict";(self.webpackChunkarcgis_node=self.webpackChunkarcgis_node||[]).push([[6022],{73882:(t,e,i)=>{i.d(e,{N:()=>Yt,l:()=>Xt});var o,n,r=i(82392),s=i(20857),a=i(73783),l=i(40377),c=i(61985),u=i(81482),p=(i(6273),i(80861),i(67498),i(26325)),d=i(68660);!function(t){t[t.NeverApplied=0]="NeverApplied",t[t.Applied=1]="Applied",t[t.Undone=2]="Undone"}(o||(o={})),function(t){t.UndoRedoUpdating="UndoRedoUpdating",t.UndoInvalidError="UndoInvalidError",t.RedoInvalidError="RedoInvalidError",t.ApplyInvalidError="ApplyInvalidError"}(n||(n={}));const h={[n.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[n.UndoInvalidError]:"There are no items to Undo",[n.RedoInvalidError]:"There are no items to Redo",[n.ApplyInvalidError]:"Cannot apply an item that is already applied"};class f extends Error{constructor(){super(h[n.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class y extends Error{constructor(){super(h[n.UndoInvalidError]),this.type="undo-redo-undo-error"}}class g extends Error{constructor(){super(h[n.RedoInvalidError]),this.type="undo-redo-redo-error"}}class m extends Error{constructor(){super(h[n.ApplyInvalidError]),this.type="undo-redo-apply-error"}}var v;!function(t){t[t.Apply=0]="Apply",t[t.Undo=1]="Undo",t[t.Redo=2]="Redo"}(v||(v={}));let _=class extends a.A{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=o.NeverApplied}get canUndo(){return this.status===o.Applied}get canRedo(){return this.status===o.Undone}async executeUndoRedoOperation(t){switch(t){case v.Apply:if(this.status!==o.NeverApplied)throw new m;return await this.apply(),void(this.status=o.Applied);case v.Undo:if(this.status!==o.Applied)throw new y;return await this.undo(),void(this.status=o.Undone);case v.Redo:if(this.status!==o.Undone)throw new y;return await this.redo(),void(this.status=o.Applied)}}};(0,r._)([(0,u.MZ)()],_.prototype,"name",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"tag",void 0),_=(0,r._)([(0,p.$)("esri.undoredo.UndoableOperation")],_);let w=class extends a.A{constructor(){super(...arguments),this._stack=new l.A,this._stackPosition=-1,this._updatingHandles=new d.U}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((t=>t.destroy()))}_drainStack(){this._stack.drain((t=>t.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new y;if(this.updating)throw new f;const t=this._stack.getItemAt(this._stackPosition);await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(v.Undo),--this._stackPosition,t.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new g;if(this.updating)throw new f;const t=this._stack.getItemAt(this._stackPosition+1);await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(v.Redo),++this._stackPosition})())}peekUndo(){return this.canUndo?this._stack.getItemAt(this._stackPosition):null}peekRedo(){return this.canRedo?this._stack.getItemAt(this._stackPosition+1):null}async inject(t){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{t.status===o.NeverApplied&&await t.executeUndoRedoOperation(v.Apply),t.canUndo?(this._stack.splice(this._stackPosition+1,0,t),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((t=>t.destroy())),this._stackPosition=-1)})())}async add(t){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{t.status===o.NeverApplied&&await t.executeUndoRedoOperation(v.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),t.canUndo?(this._stack.push(t),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(t,e=!1){if(this.updating&&!e)return;await(0,c.C_)((()=>!this.updating));const i=new l.A;for(let e=0;e<this._stack.length;e++){const o=this._stack.getItemAt(e);o.tag===t?(o.destroy(),e===this._stackPosition&&(this._stackPosition=i.length-1)):i.push(o)}this._stack=i,this._stackPosition>i.length-1&&(this._stackPosition=i.length-1)}async clear(t=!1){if(this.updating&&!t)throw new f;await(0,c.C_)((()=>!this.updating)),this._drainStack()}};(0,r._)([(0,u.MZ)()],w.prototype,"_stack",void 0),(0,r._)([(0,u.MZ)()],w.prototype,"_stackPosition",void 0),(0,r._)([(0,u.MZ)()],w.prototype,"updating",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"canUndo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"hasUndo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"canRedo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"hasRedo",null),w=(0,r._)([(0,p.$)("esri.UndoRedo")],w);var x=i(3132),M=i(57888),k=i(70214),b=i(57725),O=i(75462),Z=i(11682),A=i(92801);class I{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}i(3313);var R,U=i(3223),T=i(15565),V=i(5262),E=i(80347),C=i(19913),P=i(34670),G=i(1912),S=i(65648),F=i(44153),L=i(22538),z=i(64672),H=i(40969);let N=R=class extends S.A{constructor(...t){super(...t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let i;if(t?.center)i=t;else{if(t?.rings)return super.normalizeCtorArgs(t,e);i={center:t}}return{...super.normalizeCtorArgs(),...i,...e}}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=t?.hasZ??!1,0!==this.rings.length||!t)return;const i=(0,V.oU)(this.radius,this.radiusUnit,"meters"),o=t.spatialReference;let n,r="geographic";if(o.isWebMercator?r="webMercator":(null!=(o.wkid&&H.A[o.wkid])||(o.wkt2||o.wkt)&&(0,V.x1)(o.wkt2||o.wkt))&&(r="projected"),this.geodesic){let o;switch(r){case"webMercator":o=(0,z.ci)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}n=this._createGeodesicCircle(o,i,e),"webMercator"===r&&(n=(0,z.Gh)(n))}else{let o;"webMercator"===r||"projected"===r?o=i/(0,V.Ao)(t.spatialReference):"geographic"===r&&(o=(0,V.vl)(i,"meters",(0,P.tO)(t.spatialReference).radius)),n=this._createPlanarCircle(t,o,e)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:o,geodesic:n}=this;return new R({center:t?.clone(),numberOfPoints:e,radius:i,radiusUnit:o,geodesic:n})}_createGeodesicCircle(t,e,i){let o=0;const n=[];for(;o<360;){const r=[0,0],s=[t.x,t.y];(0,L.vN)(r,s,o,e,F.A.WGS84),this.hasZ&&r.push(t.z),n.push(r),o+=360/i}return n.push(n[0]),new S.A(n)}_createPlanarCircle(t,e,i){const o=[],n=2*Math.PI/i;for(let r=0;r<i;++r){const i=n*r,s=[t.x+Math.cos(-i)*e,t.y+Math.sin(-i)*e];this.hasZ&&s.push(t.z),o.push(s)}return o.push(o[0]),new S.A({spatialReference:t.spatialReference,rings:[o]})}};(0,r._)([(0,u.MZ)({type:G.A})],N.prototype,"center",void 0),(0,r._)([(0,u.MZ)()],N.prototype,"geodesic",void 0),(0,r._)([(0,u.MZ)()],N.prototype,"numberOfPoints",void 0),(0,r._)([(0,u.MZ)()],N.prototype,"radius",void 0),(0,r._)([(0,u.MZ)()],N.prototype,"radiusUnit",void 0),N=R=(0,r._)([(0,p.$)("esri.geometry.Circle")],N);const D=N;var j=i(65670),q=i(11021),$=i(67488),W=i(56122),Y=i(67709),B=i(38648);function Q(t,e){const i=new G.A({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function X(t,e,i){const o=new B.A({paths:t,spatialReference:e});return i&&(0,q._7)(o),o}function K(t,e,i,o=!0){const n=(0,T.o8)(t);n.forEach((t=>{const e=t[0],i=t[t.length-1];(0,U.aI)(e,i)&&1!==t.length||t.push(t[0])}));let r=new S.A({rings:n,spatialReference:e});return r.rings.forEach((t=>{(0,q.$3)(t)||t.reverse()})),i&&(0,q._7)(r),o&&r.isSelfIntersecting&&(0,$.fn)(e)&&(r=(0,j.simplify)(r)),r}function J(t,e,i){const o=e.mapToLocalMultiple(t),n=[],r={x:o[0].x,y:o[0].y},s=o[1].x,a=o[1].y,l=Math.round(s-r.x),c=Math.round(a-r.y),u=Math.max(Math.abs(l),Math.abs(c));if(i){const t={x:r.x+u,y:r.y+u},e={x:r.x-u,y:r.y-u};n.push((0,W.E5)(t.x,e.y),(0,W.E5)(e.x,e.y),(0,W.E5)(e.x,t.y),(0,W.E5)(t.x,t.y))}else{const t={x:l>0?r.x+u:r.x-u,y:c>0?r.y+u:r.y-u};n.push((0,W.E5)(r.x,r.y),(0,W.E5)(t.x,r.y),(0,W.E5)(t.x,t.y),(0,W.E5)(r.x,t.y))}return tt(K([n.map((t=>e.localToMap(t))).filter(U.Ru)],e.spatialReference,e.doUnnormalization,!0),n,e)}function tt(t,e,i){const o=et(e[3],e[2],i),n=et(e[1],e[2],i),r=et(e[0],e[1],i),s=et(e[0],e[3],i);return{geometry:t,midpoints:null!=o&&null!=n&&null!=r&&null!=s?{top:o,right:n,bottom:r,left:s}:null}}function et(t,e,i){ot[0]=t.x,ot[1]=t.y,ot[2]=0,nt[0]=e.x,nt[1]=e.y,nt[2]=0,(0,E.o)(ot,ot,nt,.5),it.x=ot[0],it.y=nt[1],it.z=nt[2];const o=i.localToMap(it);return null!=o?Q(o,i.spatialReference):null}const it=(0,W.E5)(0,0,0),ot=(0,C.vt)(),nt=(0,C.vt)();function rt(t,e,i,o){const n=e.mapToLocalMultiple(t);let r=null,s=null;if(i)r=n[0],s=n[1];else{const t=n[0],e=n[1],i=Math.round(e.x-t.x),o=Math.round(e.y-t.y),a=Math.max(Math.abs(i),Math.abs(o));r=(0,W.E5)(i>0?t.x+a/2:t.x-a/2,o>0?t.y+a/2:t.y-a/2),s=(0,W.E5)(Math.abs(i)>Math.abs(o)?r.x-a/2:r.x,Math.abs(i)>Math.abs(o)?r.y:r.y-a/2)}const a=e.localToMap(r),l=e.localToMap(s);if(null==a||null==l)return null;e.doUnnormalization&&(0,q.JM)([[a,l]],e.spatialReference);const c=Q(a,e.spatialReference),u=Q(l,e.spatialReference),p=(0,V.GA)(e.spatialReference);let d=0;if((0,$.fn)(e.spatialReference))d=p*(0,j.distance)(c,u,null);else{const t=r.x-s.x,e=r.y-s.y;d=p*Math.sqrt(t*t+e*e)*(o||1)}const h=new D({center:c,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:K(h.rings,h.spatialReference,!1),center:c,edge:u}}var st=i(7743),at=i(19541);function lt(t,e){switch(t){case"point":case"multipoint":return"point";case"polyline":return function(t){return(null!=t&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex"}(e);case"polygon":return function(t){const e=null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;return e<3?"polylineZeroVertices":e<4?"polygonOneVertex":"polygonTwoVertices"}(e);default:return}}const ct=20,ut=1,pt=.1,dt=(0,C.vt)();var ht=i(10340),ft=i(76444),yt=i(59702);let gt=class extends yt.w{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=st.iT}get allFields(){return[]}};(0,r._)([(0,u.MZ)()],gt.prototype,"type",void 0),(0,r._)([(0,u.MZ)()],gt.prototype,"radius",void 0),(0,r._)([(0,u.MZ)()],gt.prototype,"xSize",void 0),(0,r._)([(0,u.MZ)()],gt.prototype,"ySize",void 0),(0,r._)([(0,u.MZ)()],gt.prototype,"area",void 0),(0,r._)([(0,u.MZ)()],gt.prototype,"allFields",null),gt=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],gt);var mt=i(46930),vt=i(42595);let _t=class extends((0,vt.B)(yt.w)){constructor(t){super(t),this.type="draw-mesh",this.orientation=(0,mt.LJ)({lockable:!1}),this.scale=(0,mt.dy)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,r._)([(0,u.MZ)()],_t.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],_t.prototype,"allFields",null),_t=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],_t);let wt=class extends((0,vt.B)(yt.w)){constructor(t){super(t),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,u.MZ)()],wt.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],wt.prototype,"allFields",null),wt=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],wt);let xt=class extends((0,vt.B)(yt.w)){constructor(t){super(t),this.type="draw-polygon",this.direction=(0,mt.Gk)(),this.distance=(0,mt.R0)({title:t=>t.messages.sketch.distance}),this.area=(0,mt.Am)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,r._)([(0,u.MZ)()],xt.prototype,"xyMode",void 0),(0,r._)([(0,u.MZ)()],xt.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],xt.prototype,"allFields",null),xt=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],xt);let Mt=class extends((0,vt.B)(yt.w)){constructor(t){super(t),this.type="draw-polyline",this.direction=(0,mt.Gk)(),this.distance=(0,mt.R0)({title:t=>t.messages.sketch.distance}),this.totalLength=(0,mt.fr)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,r._)([(0,u.MZ)()],Mt.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"xyMode",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"allFields",null),Mt=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],Mt);let kt=class extends yt.w{constructor(t){super(t),this.type="draw-rectangle",this.xSize=st.r7,this.ySize=st.r7,this.area=st.iT}get allFields(){return[]}};(0,r._)([(0,u.MZ)()],kt.prototype,"type",void 0),(0,r._)([(0,u.MZ)()],kt.prototype,"xSize",void 0),(0,r._)([(0,u.MZ)()],kt.prototype,"ySize",void 0),(0,r._)([(0,u.MZ)()],kt.prototype,"area",void 0),(0,r._)([(0,u.MZ)()],kt.prototype,"allFields",null),kt=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],kt);var bt=i(96871),Ot=i(75795),Zt=i(49970),At=i(68489);function It(t){const{directionOptions:e,geometryType:i,sketchOptions:o,tooltipInfos:n}=t,r=e=>{const i=zt(t).mode,o=n[e].elevation;"relative-to-ground"===i||"relative-to-scene"===i||"on-the-ground"===i?o.lock(Nt(t)):o.unlock()};switch(i){case"polygon":case"polyline":r(i),(t=>{if(e){const i=n[t].direction;i.committed=e.angle,i.unlockOnVertexPlacement=!1,o.values.directionMode=e.mode}})(i);break;case"point":case"mesh":r(i)}}function Rt(t,e){const{drawOperation:i,view:o}=e,n=Tt(e),r=zt(e);if("2d"===o.type||!t||"absolute-height"!==r.mode||1!==i?.numCommittedVertices||!n||"draw-polyline"!==n.type&&"draw-polygon"!==n.type||n.elevation.locked)return;const[s,a,l]=t,c=function(t,e,i,o,n){const{view:r,drawOperation:s}=n;if("3d"!==r.type||!s)return;i??=0;const a=Ht(n),l=zt(n),c=(0,at.Fo)(r,t,e,i,a,l,o);return(0,At.Qc)(c,a)??Nt(n)}(s,a,l,r,e);null!=c&&n.elevation.lock(c)}function Ut(t){Tt(t)?.allFields.forEach((t=>{t.unlockOnVertexPlacement&&t.unlock()}))}function Tt({geometryType:t,graphic:e,tooltipInfos:i}){return"multipoint"===t||e?.geometry?.type!==Vt[t]?null:i[t]}const Vt={point:"point",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon"};function Et(t,e){switch(t?.type){case"draw-point":!function(t,e){const i=e.graphic?.geometry;"point"===i?.type&&(Ct(t,i,e),t.helpMessage=lt("point",i))}(t,e);break;case"draw-polyline":!function(t,e){const{createOperationGeometry:i,drawOperation:o}=e,n=null!=i?i.full:null;"polyline"===n?.type&&(Pt(t,e),t.totalLength.actual=o.lastVertex?(0,Zt.ob)(n)??st.r7:null,t.helpMessage=lt("polyline",n))}(t,e);break;case"draw-polygon":!function(t,e){const{createOperationGeometry:i,drawOperation:o}=e,n=null!=i?i.full:null;"polygon"===n?.type&&(Pt(t,e),t.area.actual=o.lastVertex?(0,Ot.n)(n)??st.iT:null,t.helpMessage=lt("polygon",n))}(t,e);break;case"draw-rectangle":!function(t,e){t.sketchOptions=e.sketchOptions,t.xSize=Ft(e),t.ySize=Lt(e),t.area=St(e)}(t,e);break;case"draw-circle":!function(t,e){const{forceUniformSize:i,sketchOptions:o}=e;t.sketchOptions=o,t.radius=i?function({createOperationGeometry:t}){return(null!=t?.circle?.center&&null!=t.circle.edge?(0,Zt.Kt)(t.circle.center,t.circle.edge):null)??st.r7}(e):null,t.xSize=i?null:Ft(e),t.ySize=i?null:Lt(e),t.area=St(e)}(t,e);break;case"draw-mesh":!function(t,e){const{graphic:i,view:o}=e,n=i?.geometry;"3d"===o.type&&"mesh"===n?.type&&(Ct(t,n.origin,e),(0,ft.Ue)(t,n),t.helpMessage=function(t,e){const i=t?.geometry;if(!t||"mesh"!==i?.type||!e)return;const{renderCoordsHelper:o,elevationProvider:n}=e,{camera:r}=e.state,{extent:s}=i,{center:a,spatialReference:l}=s,c=(0,V.GA)(l),u=(0,V.G9)(l),p=(0,V.GA)(o.spatialReference),d=s.width*c,h=s.height*u,f=(s.zmax??0)*u,y=f-(s.zmin??0)*u,g=Math.max(d,h,y)/p,{x:m,y:v}=a,_=a.z??0;(0,E.s)(dt,m,v,_),o.toRenderCoords(dt,l,dt);const w=g/r.computeScreenPixelSizeAt(dt);if(w>r.width*ut)return"meshTooClose";if(w<ct)return"meshTooFar";const x=(0,at.bh)(t),{absoluteZ:M}=(0,at.Q5)(m,v,f,l,e,x);return M<(n.getElevation(m,v,_,l,"ground")??0)*u+y*pt?"meshUnderground":"mesh"}(i,o))}(t,e)}}function Ct(t,e,i){const{drawOperation:o,view:n,sketchOptions:r}=i,{cursorVertex:s}=o;if(t.sketchOptions=r,t.viewType=n.type,t.setLocationFromPoint(e,Ht(i)),Gt(t.elevation,i),!s)return void(o.constraints=void 0);const a=s;o.constraints={context:Dt(a,i),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:null,direction:null}}function Pt(t,e){const{drawOperation:i,sketchOptions:o,view:n}=e,{cursorVertex:r,lastVertex:s,secondToLastVertex:a}=i,l=o.values.effectiveDirectionMode;t.sketchOptions=o,t.viewType=n.type;const c=s&&r?(0,Zt.Kt)(s,r)??st.r7:null;if(t.distance.actual=c,t.distance.readOnly=null==s,t.direction.actual=null,t.direction.readOnly=!0,s&&r&&("absolute"===l||a)){const e=(0,bt.uR)(a,s,r,l);t.direction.actual=e??st.n0,t.direction.readOnly=!1}t.setLocationFromPoint(r,Ht(e)),Gt(t.elevation,e);const u=function(t,{sketchOptions:e}){const i=e.tooltips.xyMode;return"auto"===i?t?"direction-distance":"coordinates":i}(s,e);t.xyMode=u,t.direction.visible="direction-distance"===u,t.distance.visible="direction-distance"===u,t.effectiveX.visible="coordinates"===u,t.effectiveY.visible="coordinates"===u;const p=r??s;i.constraints=p?{context:Dt(p,e),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:t.distance.committed,direction:t.direction.committed}:void 0}function Gt(t,e){const{drawOperation:i}=e,o=i?.cursorVertex??i?.lastVertex;t.actual=(0,At.Of)(o)??Nt(e),t.visible=i.hasZ,t.readOnly=!1,t.showAsZ=!0}function St(t){const e=t.createOperationGeometry?.full;return"polygon"!==e?.type?st.iT:(0,Ot.n)(e)??st.iT}function Ft(t){const e=t.createOperationGeometry?.rectangle?.midpoints;return(null!=e?(0,Zt.Kt)(e.left,e.right):null)??st.r7}function Lt(t){const e=t.createOperationGeometry?.rectangle?.midpoints;return(null!=e?(0,Zt.Kt)(e.top,e.bottom):null)??st.r7}function zt(t){return t.drawOperation.elevationInfo??at.qt}function Ht(t){return t.drawOperation.coordinateHelper.spatialReference}function Nt(t){const e=(0,V.G9)(Ht(t));return(0,st.d_)(t.defaultZ*e,"meters")}function Dt(t,e){return(0,ht.hj)(t,e.view,Ht(e),zt(e),e.drawOperation.coordinateHelper.hasZ(),e.sketchOptions.values.effectiveDirectionMode)}var jt=i(6364),qt=i(3130),$t=i(68074),Wt=i(89370);let Yt=class extends(M.A.EventedMixin(jt.g)){constructor(t){super(t),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new qt.A}initialize(){const{view:t}=this;this.internalGraphicsLayer=new Z.A({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const e=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=function(t,e){return{point:new wt({sketchOptions:e,viewType:t}),polyline:new Mt({sketchOptions:e,viewType:t}),polygon:new xt({sketchOptions:e,viewType:t}),mesh:new _t({sketchOptions:e,viewType:t}),rectangle:new kt({sketchOptions:e}),circle:new gt({sketchOptions:e})}}(t.type,this.sketchOptions);const i=this.tooltip=new $t.m({view:t});It(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,x.UT)((()=>(0,O.Hh)())),this.addHandles([e.on("vertex-add",(t=>this.onVertexAdd(t))),e.on("vertex-remove",(t=>this.onVertexRemove(t))),e.on("vertex-update",(t=>this.onVertexUpdate(t))),e.on("cursor-update",(t=>this.onCursorUpdate(t))),e.on("cursor-remove",(()=>this._updateGraphic())),e.on("complete",(t=>this.onComplete(t))),this._coordinateFormatterLoadTask,i.on("paste",(t=>(0,ft.HA)(t,this.activeTooltipInfo))),(0,c.wB)((()=>this.cursor),(t=>{e.cursor=t}),c.pc),(0,Wt.fm)((()=>{const{activeTooltipInfo:t,sketchOptions:e}=this;Et(t,this._tooltipsContext),i.info=e.tooltips.effectiveEnabled?t:null})),(0,Wt.fm)((()=>{e.constraintZ=function(t){const{geometryType:e,tooltipInfos:i}=t;switch(e){case"point":case"mesh":case"polyline":case"polygon":{const o=i[e].elevation.committed;if(!o)return;return(0,st.l3)(o,"meters")/(0,V.G9)(Ht(t))}default:return}}(this._tooltipsContext)}))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,b.pR)(this.drawOperation),this.tooltip=(0,b.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,b.pR)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){return{createOperationGeometry:this._createOperationGeometry,defaultZ:this.defaultZ,directionOptions:this.directionOptions,drawOperation:this.drawOperation,forceUniformSize:this.forceUniformSize,geometryType:this.geometryType,graphic:this.graphic,sketchOptions:this.sketchOptions,tooltipInfos:this.tooltipInfos,view:this.view}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}set mode(t){const e=this.drawOperation;e&&(e.drawingMode=t),this._set("mode",t)}get updating(){return this.drawOperation?.updating??!1}get undoRedo(){const{view:{type:t,map:e}}=this;return"2d"===t&&e&&"undoRedo"in e&&e.undoRedo instanceof w?e.undoRedo:null}set undoRedo(t){this._override("undoRedo",t)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.destroyed||(0,ft.wG)(t,this.tooltip)||this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&It(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(Qt.outline),this.removeHandles(Qt.regularVertices),this.removeHandles(Qt.activeVertex),this.removeHandles(Qt.activeEdge),this.removeHandles(Bt)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(t),this._graphic;const e=new s.A({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=e,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(e),this.addHandles(this.initializeGraphic(e)),this.notifyChange("graphic"),this.addHandles((0,k.hA)((()=>{this.internalGraphicsLayer.remove(e),this._graphic===e&&(this._graphic=null)})),Bt),e}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation)return;const{coordinateHelper:e,view:i,visualizationCursorVertex:o,lastVertex:n,committedVertices:r,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=o))return;const l=t.operationComplete?r:s,c=l.length,u=null!=o?e.pointToArray(o):null,p=this._drawSpatialReference,d="3d"===i.type&&"global"===i.viewingMode,h=new I;h.committedVertices=r,h.cursorVertex=u;const{geometryType:f}=this;switch(f){case"point":case"mesh":h.full=e.arrayToPoint(l[0]);break;case"multipoint":h.full=c>0?function(t,e){return new Y.A({points:t,spatialReference:e})}(l,p):null;break;case"polyline":case"polygon":c>0&&(h.full="polygon"===f?K([l],p,d,!0):X([l],p,d),h.cursorEdge=null!=u&&n&&!(0,A.CI)(o,n)?X([[u,e.pointToArray(n)]],p,d):null,h.outline=c>1?h.full:null);break;case"circle":case"rectangle":{if(h.committedVertices=h.cursorVertex=null,!c)break;const e=(0,W.ZP)(i,l[0]),o=l[0],n=e.makeMapPoint(o[0]+Kt*i.resolution,o[1]);"circle"===f?1===c&&t.operationComplete?h.circle=rt([o,n],e,!0):2===c&&(this.forceUniformSize?h.circle=rt(l,e,this.centered):h.rectangle=function(t,e,i){const o=e.mapToLocalMultiple(t),n=o[0],r=o[1],s=Math.round(r.x-n.x),a=Math.round(r.y-n.y),l=(0,W.E5)(i?n.x:n.x+s/2,i?n.y:n.y+a/2),c=i?s:s/2,u=i?a:a/2,p=[],d=2*Math.PI/60;function h(t){const e=Math.cos(t),i=Math.sin(t);return(0,W.E5)(c*e+l.x,u*i+l.y)}for(let t=0;t<60;t++)p.push(h(t*d));p.push(p[0]);const{spatialReference:f,doUnnormalization:y}=e,g=K([p.map((t=>e.localToMap(t))).filter(U.Ru)],f,y,!1),m=e.localToMap(h(Math.PI/2)),v=e.localToMap(h(0)),_=e.localToMap(h(-Math.PI/2)),w=e.localToMap(h(Math.PI));return{geometry:g,midpoints:null!=m&&null!=v&&null!=_&&null!=w?{top:Q(m,f),right:Q(v,f),bottom:Q(_,f),left:Q(w,f)}:null}}(l,e,this.centered)):1===c&&t.operationComplete?h.rectangle=J([o,n],e,!0):2===c&&(h.rectangle=this.forceUniformSize?J(l,e,this.centered):function(t,e,i){let o=e.mapToLocalMultiple(t);if(1===o.length){const t=48,e=o[0];o=[(0,W.E5)(e.x-t,e.y+t),(0,W.E5)(e.x+t,e.y-t),(0,W.E5)(e.x+t,e.y-t),(0,W.E5)(e.x-t,e.y+t)]}const n=[],r={x:o[0].x,y:o[0].y},s={x:o[1].x,y:o[1].y};if(i){const t=Math.round(s.x-r.x),e=Math.round(s.y-r.y);n.push((0,W.E5)(r.x-t,r.y-e),(0,W.E5)(s.x,r.y-e),(0,W.E5)(s.x,s.y),(0,W.E5)(r.x-t,s.y))}else n.push((0,W.E5)(r.x,r.y),(0,W.E5)(s.x,r.y),(0,W.E5)(s.x,s.y),(0,W.E5)(r.x,s.y));return tt(K([n.map((t=>e.localToMap(t))).filter(U.Ru)],e.spatialReference,e.doUnnormalization,!0),n,e)}(l,e,this.centered)),h.full=null!=h.circle?h.circle.geometry:h.rectangle?.geometry,h.outline="polygon"===h.full?.type?h.full:null;break}default:return null}return h}initializeGraphic(t){return(0,k.hA)()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return(0,k.hA)()}onCursorEdgeChanged(t){return(0,k.hA)()}onVertexAdd(t){Ut(this._tooltipsContext),this._updateGraphic(),Rt(t.vertices.at(0)?.coordinates,this._tooltipsContext),this.emit("vertex-add",t)}onVertexRemove(t){Ut(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.cursorEdge?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),Qt.activeEdge):this.removeHandles(Qt.activeEdge),null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),Qt.outline):this.removeHandles(Qt.outline),null!=t.committedVertices?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),Qt.regularVertices):this.removeHandles(Qt.regularVertices),null!=t.cursorVertex?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),Qt.activeVertex):this.removeHandles(Qt.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(Bt)):this._destroyAllVisualizations()}get activeTooltipInfo(){return this._coordinateFormatterLoadTask?.finished?Tt(this._tooltipsContext):null}};(0,r._)([(0,u.MZ)()],Yt.prototype,"_coordinateFormatterLoadTask",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"_createOperationGeometry",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"_tooltipsContext",null),(0,r._)([(0,u.MZ)({value:!0})],Yt.prototype,"centered",null),(0,r._)([(0,u.MZ)()],Yt.prototype,"cursor",null),(0,r._)([(0,u.MZ)({nonNullable:!0})],Yt.prototype,"defaultZ",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Yt.prototype,"directionOptions",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"drawOperation",void 0),(0,r._)([(0,u.MZ)({value:!0})],Yt.prototype,"enabled",null),(0,r._)([(0,u.MZ)({value:!0})],Yt.prototype,"forceUniformSize",null),(0,r._)([(0,u.MZ)({constructOnly:!0})],Yt.prototype,"geometryType",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"graphic",null),(0,r._)([(0,u.MZ)({constructOnly:!0})],Yt.prototype,"graphicProperties",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"graphicSymbol",null),(0,r._)([(0,u.MZ)({constructOnly:!0})],Yt.prototype,"hasZ",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Yt.prototype,"geometryToPlace",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"mode",null),(0,r._)([(0,u.MZ)()],Yt.prototype,"snappingManager",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"snapToScene",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"tooltip",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"tooltipInfos",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0,type:qt.A})],Yt.prototype,"sketchOptions",void 0),(0,r._)([(0,u.MZ)()],Yt.prototype,"updating",null),(0,r._)([(0,u.MZ)({constructOnly:!0,nonNullable:!0})],Yt.prototype,"view",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Yt.prototype,"undoRedo",null),(0,r._)([(0,u.MZ)()],Yt.prototype,"activeTooltipInfo",null),Yt=(0,r._)([(0,p.$)("esri.views.draw.DrawGraphicTool")],Yt);const Bt=Symbol("create-operation-graphic"),Qt={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function Xt(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const Kt=48},96165:(t,e,i)=>{i.d(e,{Bb:()=>d,G3:()=>y,fJ:()=>h});var o=i(53334),n=i(80347),r=i(19913),s=i(7775),a=i(11631),l=i(91604),c=i(68514),u=i(98543),p=i(62853);function d(t,e){return f(t,e,!1)}function h(t,e){return f(t,e,!0)}function f(t,e,i){if(t instanceof p.D){if(t.operation instanceof l.a)return function(t,e,i=!1){const o=i?-1:1,a=(0,r.fA)(o*t.dx,o*t.dy,o*t.dz);(0,n.g)(e.origin,e.origin,a),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof c.m)return function(t,e,i=!1){const o=i?-t.angle:t.angle;(0,n.K)(e.basis1,e.basis1,r.uY,o),(0,n.K)(e.basis2,e.basis2,r.uY,o),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof u.j)return function(t,e,i=!1){const r=i?1/t.factor1:t.factor1,a=i?1/t.factor2:t.factor2;(0,n.j)(e.basis1,e.basis1,r),(0,n.j)(e.basis2,e.basis2,a),(0,o.Vj)(e.origin,e.origin,t.origin,t.axis1,r),(0,o.Vj)(e.origin,e.origin,t.origin,t.axis2,a),(0,s.u)(e)}(t.operation,e,i),!0}return!1}function y(t,e,i,n){n||(n=(0,s.a)());const r=(0,o.hZ)(a.oG.get(),t[1],-t[0]),l=(0,o.hZ)(a.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),c=(0,o.hZ)(a.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),u=a.oG.get();e.components.forEach((e=>e.vertices.forEach((({pos:e})=>{(0,o.hZ)(u,(0,o.Om)(t,e),(0,o.Om)(r,e)),(0,o.jk)(l,l,u),(0,o.T9)(c,c,u)}))));const p=1e-6,d=(0,o.hZ)(a.oG.get(),c[0]-l[0]<p?i/2:0,c[1]-l[1]<p?i/2:0);return(0,o.Re)(l,l,d),(0,o.WQ)(c,c,d),(0,o.hs)(n.basis1,t,(c[0]-l[0])/2),(0,o.hs)(n.basis2,r,(c[1]-l[1])/2),(0,o.hZ)(n.origin,l[0]*t[0]+l[1]*r[0],l[0]*t[1]+l[1]*r[1]),(0,o.WQ)(n.origin,n.origin,n.basis1),(0,o.WQ)(n.origin,n.origin,n.basis2),(0,s.u)(n),n}},46930:(t,e,i)=>{i.d(e,{Am:()=>M,Gk:()=>g,S3:()=>_,fL:()=>b,R0:()=>m,em:()=>k,LJ:()=>w,dy:()=>x,fr:()=>v,Hw:()=>O,uf:()=>Z});var o=i(7743),n=i(40558),r=i(82392),s=i(73783),a=i(1874),l=i(81482),c=(i(6273),i(80861),i(67498),i(26325));let u=class extends s.A{constructor(t){super(t),this.actual=null,this.lockable=!0,this.id=(0,a.lk)(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(t){this.lockable&&this._set("committed",t)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(t){this.inputValue=t}onCommit(t,e,i){this.lockable?this._onCommitLockable(t,i):this._onCommitNonLockable(i),this.invalid&&"commit-and-exit"===t||i.onCommit(e,t)}_onCommitLockable(t,e){const{inputValue:i,locked:o}=this;o&&p(i)?this.unlock():("commit-and-exit"===t&&!o||null!=i)&&this._parseInputAndLock(e)}_onCommitNonLockable(t){const{inputValue:e}=this;p(e)?this.setActual(null):null!=e&&this._parseInputAndSetActual(t)}applyValue(t){this.lockable?this.lock(t):this.setActual(t)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(t){this.actual=t,this.clearInputValue()}lock(t){this.lockable&&(this.committed=t??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(t){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(t))}getSuffix(t){const{suffix:e}=this;return"function"==typeof e?e(t):e}getFormattedValue(t){const{actual:e,committed:i,format:o}=this;return null!=i?o(i,t):null!=e?o(e,t):null}getRawDisplayValue(t){const{actual:e,committed:i,inputValue:o}=this;return null!=o?o:this.lockable&&null!=i?this.formatForInputMode(i,t):null!=e?this.formatForInputMode(e,t):null}_parseInputAndSetActual(t){const{inputValue:e}=this;if(null==e||p(e))return this.setActual(null);const i=this.parse(e,t);null!=i?this.setActual(i):this.invalid=!0}_parseInputAndLock(t){const{inputValue:e,actual:i}=this;if(p(e))return this.unlock();if(null==e)return this.lock(i);const o=this.parse(e,t);null!=o?this.lock(o):this.invalid=!0}};function p(t){return null!=t&&""===t.trim()}(0,r._)([(0,l.MZ)()],u.prototype,"actual",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"committed",null),(0,r._)([(0,l.MZ)()],u.prototype,"dirty",null),(0,r._)([(0,l.MZ)()],u.prototype,"format",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"formatForInputMode",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"lockable",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"locked",null),(0,r._)([(0,l.MZ)()],u.prototype,"id",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"inputValue",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"name",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"parse",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"readOnly",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"suffix",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"title",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"visible",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"invalid",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"unlockOnVertexPlacement",void 0),u=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipField")],u);let d=class extends u{constructor(t){super(t),this.showAsZ=!1}normalizeCtorArgs(t){const e=t=>t.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:o.r7,parse:(0,n.hw)(((t,i)=>(0,o.d_)(t,e(i)))),format:(t,e)=>e.formatters.verticalLength(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,o.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...t}}};(0,r._)([(0,l.MZ)()],d.prototype,"showAsZ",void 0),d=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],d);var h=i(37902),f=i(96871);let y=class extends u{constructor(t){super(t),this.precision=1}normalizeCtorArgs(t){return{name:"orientation",actual:null,parse:(0,n.hw)(((t,e)=>(0,o.Wq)(t,(t=>t.inputUnitInfos.orientation.unit)(e),"geographic"))),format:t=>{const e=(0,f.P1)(t);return(0,h.Nk)(e,"geographic",this.precision)},formatForInputMode:(t,e)=>{const i=(0,f.P1)(t);return e.formatters.scalar(i)},suffix:t=>t.inputUnitInfos.orientation.abbreviation,title:t=>t.messages.sketch.orientation,...t}}};function g(t){const e=t=>t.inputUnitInfos.direction.unit,i=t=>t.sketchOptions.values.effectiveDirectionMode;return new u({name:"direction",actual:o.IV,parse:(0,n.hw)(((t,i)=>(0,o.Wq)(t,e(i),"geographic"))),format:(t,e)=>{const o=i(e),n=(0,f.jQ)(t,o);switch(o){case f.rZ.Absolute:return e.formatters.direction(n);case f.rZ.Relative:return e.formatters.directionRelative(n);case f.rZ.RelativeBilateral:return e.formatters.directionRelativeBilateral(n)}},formatForInputMode:(t,n)=>{const r=(0,f.jQ)(t,i(n));return n.formatters.scalar((0,o.kM)(r,e(n)))},suffix:t=>t.inputUnitInfos.direction.abbreviation,title:t=>{const e=i(t),{absolute:o,relative:n}=t.messages.sketch.direction;switch(e){case f.rZ.Absolute:return o;case f.rZ.Relative:case f.rZ.RelativeBilateral:return n}},...t})}function m(t){const e=t=>t.inputUnitInfos.length.unit;return new u({name:"distance",actual:o.r7,parse:(0,n.hw)(((t,i)=>(0,o.d_)(Math.max(t,0),e(i)))),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,o.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...t})}function v(){return m({format:(t,e)=>e.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0})}function _(t){return new d(t)}function w(t){return new y(t)}function x(t){return A("scale",{name:"scale",actual:null,parse:(0,n.hw)((t=>(0,o.LF)(Math.abs(t)))),...t})}function M(t){const e=t=>t.inputUnitInfos.area.unit;return new u({name:"area",actual:o.iT,parse:(0,n.hw)(((t,i)=>(0,o.gT)(t,e(i)))),format:(t,e)=>e.formatters.area(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,o.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...t})}function k(t){return new u({name:"x",actual:o.IV,parse:n.L5,format:(t,e)=>e.formatters.longitudeDecimalDegrees(t),formatForInputMode:t=>(0,n.zX)(t),suffix:t=>t.inputUnitInfos.longitudeLatitude.abbreviation,title:t=>t.messages.sketch.longitude,...t})}function b(t){return new u({name:"y",actual:o.IV,parse:n.A3,format:(t,e)=>e.formatters.latitudeDecimalDegrees(t),formatForInputMode:t=>(0,n.oZ)(t),suffix:t=>t.inputUnitInfos.longitudeLatitude.abbreviation,title:t=>t.messages.sketch.latitude,...t})}function O(t){return A("x",{name:"x",...t})}function Z(t){return A("y",{name:"y",...t})}function A(t,e){return new u({actual:(0,o.LF)(0),parse:(0,n.hw)((t=>(0,o.LF)(t))),format:(t,e)=>e.formatters.scalar(t),formatForInputMode:(t,e)=>e.formatters.scalar(t),title:e=>e.messages.sketch[t],...e})}(0,r._)([(0,l.MZ)()],y.prototype,"precision",void 0),y=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],y)},42595:(t,e,i)=>{i.d(e,{B:()=>p});var o=i(82392),n=i(7743),r=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),a=i(10227),l=i(46930),c=i(40558),u=i(7540);const p=t=>{let e=class extends t{constructor(){super(...arguments),this.longitude=(0,l.em)(),this.latitude=(0,l.fL)(),this.x=(0,l.Hw)(),this.y=(0,l.uf)(),this.elevation=(0,l.S3)(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,e=t?.spatialReference){if(this.geographic=!!e&&(0,u.yF)(e),null==t)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const e=(0,a.QP)(t,d);this._setActualLonLat((0,c.m6)(e?.[0]),(0,c.m6)(e?.[1]))}else this._setActualXY((0,n.LF)(t.x),(0,n.LF)(t.y))}_setActualLonLat(t,e){this.longitude.actual=t,this.latitude.actual=e}_setActualXY(t,e){this.x.actual=t,this.y.actual=e}};return(0,o._)([(0,r.MZ)()],e.prototype,"geographic",void 0),(0,o._)([(0,r.MZ)()],e.prototype,"effectiveX",null),(0,o._)([(0,r.MZ)()],e.prototype,"effectiveY",null),(0,o._)([(0,r.MZ)()],e.prototype,"key",null),e=(0,o._)([(0,s.$)("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],e),e},d=[0,0]},76444:(t,e,i)=>{i.d(e,{HA:()=>I,IA:()=>_,Ue:()=>v,mu:()=>w,sZ:()=>A,wG:()=>Z});var o=i(3132),n=i(70214),r=i(4506),s=i(7743),a=i(5262),l=i(80347),c=i(19913),u=i(75462),p=(i(1912),i(77873)),d=i(28364),h=i(67488),f=i(64672),y=i(92750),g=i(40558),m=i(96871);function v(t,e){const i=(0,d.Hq)(e.vertexSpace),{scale:o,orientation:n}=t,{transform:r}=e,a=function(t){if(!t)return 0;const e=k(t.rotationAxis);return null!=e?e*t.rotationAngle:null}(r);i&&null!=a?(n.actual=(0,s.Wq)(a,"degrees","arithmetic"),n.visible=!0):(n.actual=null,n.visible=!1),i?(o.actual=(0,s.LF)(O(r)),o.visible=!0):(o.actual=null,o.visible=!1)}function _(t,e,i){if(!e||!(0,d.Hq)(e.vertexSpace))return;const o=e.transform??=new p.A,{rotationAngle:n,rotationAxis:r}=o,s=(0,m.Ef)(t.orientation.actual),a=k(r);if(null!=s&&null!=a&&s!==n){i?.onRotateStart?.(n);const t=s*a;o.rotationAngle=t,i?.onRotate?.(t),i?.onRotateStop?.(t)}const u=t.scale.actual?.value,h=O(o);if(null!=u&&u!==h){const{scale:t}=o;let e;if(i?.onScaleStart?.(t[0],t[1],t[2]),0===h)e=(0,c.o8)(c.Un);else{const i=u/h;e=(0,l.j)((0,c.vt)(),t,i)}o.scale=e,i?.onScale?.(e[0],e[1],e[2]),i?.onScaleStop?.(e[0],e[1],e[2])}}function w(t,e){const{x:i,y:o,z:n}=e,{x:s,y:a,z:l}=x(t,e.spatialReference);return{dx:null==s||(0,r.Io)(s,i)?0:s-i,dy:null==a||(0,r.Io)(a,o)?0:a-o,dz:null==l||null==n||(0,r.Io)(l,n)?0:l-n}}function x(t,e){let i,o,n;if(t.geographic){i=(0,m.hF)(t.longitude.actual),o=(0,m.hF)(t.latitude.actual),(0,h.K8)(e)&&(null!=i&&null!=o?[i,o]=(0,f.je)(i,o,M):null!=i?i=(0,f.je)(i,0,M)[0]:null!=o&&(o=(0,f.je)(0,o,M)[1]));const r=t.elevation.actual,l=(0,a.mq)(e);n=null!=l&&null!=r?(0,s.l3)(r,l):void 0}else i=t.x.actual?.value,o=t.y.actual?.value,n=t.elevation.actual?.value;return{x:i,y:o,z:n}}const M=[0,0];function k(t){return(0,l.G)(t,c.Cb)?1:(0,l.G)(t,b)?-1:null}const b=(0,l.k)((0,c.vt)(),c.Cb);function O(t){return t?Math.max(...t.scale):1}function Z(t,e){return!("key-down"!==t.type||t.key!==y.ac.enterInputMode||!e||!function(t){const e=t?.sketchOptions;if(!e)return!1;const{inputEnabled:i,visibleElements:o}=e.tooltips;return i&&!0===t.editableFields.some((({name:t})=>"x"===t||"y"===t?o.coordinates:o[t]))}(e.info)||(e.enterInputMode(),t.stopPropagation(),0))}function A(t){let e=null;return(0,n.vE)([t.on("paste",(async i=>{e?.abort(),e=(0,o.UT)((async()=>{(0,u.s1)()||await(0,u.Hh)(),I(i,t.info)}))})),(0,o.UT)((()=>(0,u.Hh)())),(0,n.hA)((()=>e?.abort()))])}function I(t,e){if(!e||!("geographic"in e))return;const i=t.clipboardData?.getData("text");if(i)if(e.geographic){const o=(0,g.X3)(i);o&&(e.longitude.applyValue(o.longitude),e.latitude.applyValue(o.latitude),t.stopPropagation(),t.preventDefault())}else{const o=(0,g.Nr)(i);o&&(e.x.applyValue(o.x),e.y.applyValue(o.y),t.stopPropagation(),t.preventDefault())}}},75795:(t,e,i)=>{i.d(e,{n:()=>r});var o=i(23248),n=i(33701);function r(t,e=(0,o.u0)()){return function(t,e,i=(0,o.u0)()){if("on-the-ground"===e){const e=(0,n.P)(t);return null!=e?e:(0,o.qh)(t,i)}return(0,o.EI)(t,i)}(t,"on-the-ground",e)}},23248:(t,e,i)=>{i.d(e,{EI:()=>d,lO:()=>v,qh:()=>h,u0:()=>m});var o=i(7743),n=i(5262),r=i(91814),s=i(80347),a=i(19913),l=i(42722),c=i(87368),u=i(45660),p=i(21403);function d(t,e={positionsWorldCoords:[]}){return f(t,e)}function h(t,e={positionsWorldCoords:[]}){return f(t,e,!1)}function f(t,e,i=t.hasZ){const r=(0,p.l)(t.spatialReference),d=(0,n.B5)(r);if(null==d)return null;const h=(t,e)=>!(e.length<2||((0,s.s)(t,e[0],e[1],i&&e[2]||0),0));let f=0;for(const i of t.rings){const o=i.length;if(o<3)continue;const{positionsWorldCoords:n}=e;for(;n.length<o;)n.push((0,a.vt)());const p=y,d=(0,s.s)(g,0,0,0),m=1/o;for(let e=0;e<o;e++){if(!h(p,i[e]))return null;if(!(0,l.F)(p,t.spatialReference,n[e],r))return null;(0,s.r)(d,d,n[e],m)}const _=(0,c.Cr)(n[0],n[1],d,(0,c.LV)());if(0===(0,s.q)((0,c.Qj)(_)))continue;for(let t=0;t<o;t++)(0,c.Z1)(_,d,n[t],n[t]);const w=v(n);for(let t=0;t<w.length;t+=3)f+=(0,u.Fm)(n[w[t]],n[w[t+1]],n[w[t+2]])}return(0,o.gT)(f,d)}const y=(0,a.vt)(),g=(0,a.vt)();function m(){return{positionsWorldCoords:[]}}function v(t){return(0,r.e)(function(t){const e=new Float64Array(2*t.length);for(let i=0;i<t.length;++i){const o=t[i],n=2*i;e[n]=o[0],e[n+1]=o[1]}return e}(t),[],2)}},33701:(t,e,i)=>{i.d(e,{P:()=>a});var o=i(7743),n=i(65670),r=i(22538),s=i(7540);function a(t){const{spatialReference:e}=t;return(0,s.M0)(e,l,c,t)}function l(t){return(0,o.gT)(Math.abs((0,r.qy)([t],"square-meters")[0]),"square-meters")}function c(t){try{return(0,o.gT)(Math.abs((0,n.geodesicArea)(t,"square-meters")),"square-meters")}catch(t){return null}}}}]);