"use strict";(self.webpackChunkarcgis_node=self.webpackChunkarcgis_node||[]).push([[9810],{99810:(t,e,n)=>{n.r(e),n.d(e,{executeAttachmentQuery:()=>d,fetchAttachments:()=>p,processAttachmentQueryResult:()=>h});var s=n(6480),a=n(38116),o=n(19759),c=n(49173),r=n(82220);function u(t){const e=t.toJSON();return e.attachmentTypes&&(e.attachmentTypes=e.attachmentTypes.join(",")),e.keywords&&(e.keywords=e.keywords.join(",")),e.globalIds&&(e.globalIds=e.globalIds.join(",")),e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.size&&(e.size=e.size.join(",")),e}function h(t,e){const n={};for(const a of e){const{parentObjectId:e,parentGlobalId:c,attachmentInfos:u}=a;for(const a of u){const{id:u}=a,h=(0,o.yM)((0,s.Y3)(`${t.path}/${e}/attachments/${u}`)),d=r.A.fromJSON(a);d.set({url:h,parentObjectId:e,parentGlobalId:c}),n[e]?n[e].push(d):n[e]=[d]}}return n}function d(t,e,n){let s={query:(0,c.z)({...t.query,f:"json",...u(e)})};return n&&(s={...n,...s,query:{...n.query,...s.query}}),(0,a.A)(t.path+"/queryAttachments",s).then((t=>t.data.attachmentGroups))}async function p(t,e,n){const{objectIds:s}=e,o=[];for(const e of s)o.push((0,a.A)(t.path+"/"+e+"/attachments",n));return Promise.all(o).then((t=>s.map(((e,n)=>({parentObjectId:e,attachmentInfos:t[n].data.attachmentInfos})))))}}}]);