"use strict";(self.webpackChunkarcgis_node=self.webpackChunkarcgis_node||[]).push([[3564],{18985:(e,t,r)=>{r.d(t,{h:()=>o});let i=e=>({vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}),n=(e,t,r)=>{for(let o=0,s=t.length;o<s;o++){let s=t[o];Array.isArray(s)?n(e,s,r):null!=s&&!1!==s&&("string"==typeof s&&(s=i(s)),r.push(s))}};function o(e,t,r){if(Array.isArray(t))r=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||r&&("string"==typeof r||r.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let i,o;return r&&1===r.length&&"string"==typeof r[0]?i=r[0]:r&&(o=[],n(e,r,o),0===o.length&&(o=void 0)),{vnodeSelector:e,properties:t,children:o,text:""===i?void 0:i,domNode:null}}},52789:(e,t,r)=>{r.d(t,{t:()=>u,k:()=>d});const i="theme-style";function n(e,t){return function(e,t){const r=new Image(t,t);return r.src=e,r}(function(e){const t=(new XMLSerializer).serializeToString(e);return`data:image/svg+xml;base64,${btoa(t)}`}(o(function(e){const t=e.split(",")[1],r=atob(t);return(new DOMParser).parseFromString(r,"image/svg+xml")}(e),t)),t.size)}function o(e,{accentColor:t,contrastColor:r}){const n=t.toHex(),o=t.a,s=r.toHex(),a=r.a,l=e.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(i);return l&&(l.innerHTML=`\n      .contrast-fill { fill: ${s}; fill-opacity: ${a}; }\n      .contrast-stroke { stroke: ${s}; stroke-opacity: ${a};  }\n      .accent-fill { fill: ${n}; fill-opacity: ${o}; }\n      .accent-stroke { stroke: ${n}; stroke-opacity:  ${o}; }`),e}const s="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==",a="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTggMTEuOTggMCAwIDAtOS44IDcuNTA3IiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIGNvbnRyYXN0LWZpbGwiLz48cGF0aCBkPSJtMjkuODE4IDIyLjgwOC02LjE4NCA0LjYtLjU0MS04LjM2NHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+";var l=r(32573);const c=64;function u(e,t){const{accentColor:r,contrastColor:i,preMultiplyAlpha:o}=t;return e.fromData(`heading-rotate:[accent:${r},contrast:${i},size:${c}]`,(()=>new l.g(n(s,{accentColor:r,contrastColor:i,size:c}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:o})))}function d(e,t){const{accentColor:r,contrastColor:i,preMultiplyAlpha:o}=t;return e.fromData(`tilt-rotate:[accent:${r},contrast:${i},size:${c}]`,(()=>new l.g(n(a,{accentColor:r,contrastColor:i,size:c}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:o})))}},5751:(e,t,r)=>{r.d(t,{B:()=>o,V:()=>s});var i=r(34561),n=r(2568);function o(e,t,r,o=!1){const s=(0,i.tryProjectWithZConversion)(e,t);return null==s?null:(s.hasZ&&!o||null==r||(s.z=(0,n.R1)(r,s)??0),s)}function s(e,t,r){r.warnOnce(`Failed to project analysis geometry (id: '${e.id}'), projection from spatial reference (wkid: '${t.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}},8035:(e,t,r)=>{r.d(t,{s:()=>Y});var i=r(93814),n=r(60861),o=(r(6273),r(70214)),s=r(80347),a=r(19913),l=r(42722),c=r(19541),u=r(33330),d=r(61985),h=r(23572),p=r(53334),_=r(56560),m=r(74772),g=r(53357),f=r(82320),x=r(14788),v=r(14583),y=r(74316),S=r(31272),M=r(35537),b=r(33763),w=r(16596);class O extends x.X{constructor(e){super(e),this._location=(0,a.vt)(),this._direction=(0,a.fA)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=(0,g.fA)(1,0,1,1),this._renderOccluded=S.m$.OccludeAndTransparent,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:I,recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:z,recreateGeometry:e=>this._recreateDrapedGeometry(e)}}get location(){return this._location}set location(e){(0,s.e)(this._location,e)||((0,s.c)(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){(0,s.e)(this._direction,e)||((0,s.c)(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){(0,s.n)(this._direction,(0,s.f)(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){(0,m.a)(e,this._color)||((0,m.c)(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}_createObject3DResources(e){const t=new w.W(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r,forEach:e=>{e(t),r.forEach(e)}}}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const[i,n]=R(e);t.addGeometry(i),t.addGeometry(n),r.push(i),r.push(n),this._updateVerticesObject3D(t)}_createDrapedResources(){const e=new w.W(this.materialParameters),t=(0,d.wB)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}));return{material:e,geometries:this._createDrapedGeometry(e),pixelRatioHandle:t}}_recreateDrapedGeometry(e){e.geometries=this._createDrapedGeometry(e.material)}_createDrapedGeometry(e){const t=R(e);return this._updateVerticesDraped(t),t.map((e=>new M.$(e)))}_updateMaterial(){const{materialParameters:e}=this;this.object3dResources.resources?.material.setParameters(e),this.drapedResources.resources?.material.setParameters(e)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this.view.state.camera;t.projectToScreen(this.location,N),(0,s.g)(C,this.location,this.direction),t.projectToScreen(C,G),(0,p.S8)(G,(0,p.Re)(G,G,N)),this._updateVertexAttributesObject3D(t,e,0,N,G,1),this._updateVertexAttributesObject3D(t,e,1,N,G,-1)}_updateVertexAttributesObject3D(e,t,r,i,n,o){const s=t.geometries[r],a=s.getMutableAttribute(b.r.POSITION)?.data;if(!a)return;const{start:l,end:c}=D(n,i,o,this.offset,this.width,this.length);e.unprojectFromScreen((0,h.PR)(l),C),a[0]=C[0],a[1]=C[1],a[2]=C[2],e.unprojectFromScreen((0,h.PR)(c),C),a[3]=C[0],a[4]=C[1],a[5]=C[2],t.geometryVertexAttributeUpdated(s,b.r.POSITION)}_updateVerticesDraped(e){const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{location:i,width:n,length:o,offset:s}=this,a=T;a.spatialReference=t.renderer.spatialReference,a.x=i[0],a.y=i[1];const l=this.view.overlayPixelSizeInMapUnits(a)*r,c=n*l,u=o*l,d=s*l;this._updateVertexAttributesDraped(e[0],c,u,d,-1),this._updateVertexAttributesDraped(e[1],c,u,d,1)}_updateVertexAttributesDraped(e,t,r,i,n){const o=e.getMutableAttribute(b.r.POSITION)?.data;if(!o)return;const{location:s,direction:a}=this,{start:l,end:c}=D(a,s,n,i,t,r);o[0]=l[0],o[1]=l[1],o[2]=v.bi,o[3]=c[0],o[4]=c[1],o[5]=v.bi,e.invalidateBoundingInfo()}}function R(e){return[(0,y.Z8)(e,[(0,a.vt)(),(0,a.vt)()]),(0,y.Z8)(e,[(0,a.vt)(),(0,a.vt)()])]}function D(e,t,r,i,n,o){const s=(0,p.hs)(A,(0,p.hZ)(A,e[1]*r,e[0]*-r),i+n/2),a=(0,p.WQ)(P,(0,p.WQ)(P,(0,p.WQ)(P,t,(0,p.hs)(P,e,o/2)),s),s);return{start:a,end:(0,p.WQ)(j,a,(0,p.hs)(j,e,-o))}}function I(e){e.geometries.length=0}function z(e){e.pixelRatioHandle.remove(),e.geometries=[]}const C=(0,a.vt)(),A=(0,_.vt)(),P=(0,_.vt)(),j=(0,_.vt)(),N=(0,h.gs)(),G=(0,h.gs)(),T=(0,f.T)(0,0,void 0,null);var E=r(83157),Z=r(57657),H=r(161),L=r(93617),F=r(51879),W=r(49982),$=r(53981),k=r(36598),U=r(56142),B=r(5073);class Y extends k.b{sortUniqueHints(e){return e.sort(((e,t)=>(t instanceof U.c?t.length:0)-(e instanceof U.c?e.length:0)))}visualizeIntersectionPoint(e,t){const{spatialReference:r,view:i}=t,n=V(t);return(0,o.DQ)(new E.l({view:i,primitive:"circle",geometry:(0,L.io)(e.intersectionPoint,r),elevationInfo:e.isDraped?c.Tq:c.qt,size:20,outlineSize:2,color:n.intersectionPointColor,outlineColor:n.intersectionPointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizePoint(e,t){const{view:r,spatialReference:i}=t,n=V(t),s=q(e.point,e.domain,t);return(0,o.DQ)(new E.l({view:r,primitive:"circle",geometry:(0,L.io)(s,i),elevationInfo:Q(e),size:20,outlineSize:2,color:n.pointColor,outlineColor:n.pointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizeLine(e,t){const{view:r,spatialReference:i}=t,n=V(t),s=q(e.lineStart,e.domain,t),a=q(e.lineEnd,e.domain,t);return(0,o.DQ)(function(e,t,r,i,n,o,s,a=!1,l=!0,c=!0){const d=X(t,i,n,o,a),h=X(r,i,n,o,a),p=new u.U({view:o,extensionType:u.A.FADED,start:d,end:h,isDraped:a,color:s.lineColor,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,renderGroup:H.O7.SnappingHint,isDecoration:!0});switch(e){case $.H3.TARGET:p.width=F.N.lineHintWidthTarget,p.fadedExtensions={start:0,end:F.N.lineHintFadedExtensions};break;case $.H3.REFERENCE_EXTENSION:p.width=F.N.lineHintWidthReference,p.fadedExtensions={start:0,end:0};break;case $.H3.REFERENCE:p.width=F.N.lineHintWidthReference,p.fadedExtensions={start:l?F.N.lineHintFadedExtensions:0,end:c?F.N.lineHintFadedExtensions:0}}return p.attached=!0,p}(e.type,s,a,i,Q(e),r,n,e.isDraped,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,t){const{view:r,spatialReference:i}=t,n=V(t),{isDraped:a}=e,l=Q(e),c=q(e.lineStart,e.domain,t),u=q(e.lineEnd,e.domain,t),d=X(c,i,l,r,a),h=X(u,i,l,r,a),p=(0,s.o)(h,d,h,.5),_=new O({view:r,attached:!1,offset:F.N.parallelLineHintOffset,length:F.N.parallelLineHintLength,width:F.N.parallelLineHintWidth,color:n.parallelSignColor,location:p,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,isDraped:a,renderGroup:H.O7.SnappingHint,isDecoration:!0});return _.setDirectionFromPoints(d,p),_.attached=!0,(0,o.DQ)(_)}visualizeRightAngleQuad(e,t){const{view:r,spatialReference:i}=t,n=V(t),s=Q(e),{isDraped:a}=e,l=q(e.previousVertex,e.domain,t),c=q(e.centerVertex,e.domain,t),u=q(e.nextVertex,e.domain,t),d=X(l,i,s,r,a),h=X(c,i,s,r,a),p=X(u,i,s,r,a);return(0,o.DQ)(new Z.n({view:r,attached:!0,color:a?n.rightAngleColorDraped:n.rightAngleColor,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Transparent,outlineRenderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,outlineColor:n.rightAngleOutlineColor,outlineSize:F.N.rightAngleHintOutlineSize,size:F.N.rightAngleHintSize,isDraped:a,geometry:{previous:d,center:h,next:p},renderGroup:H.O7.SnappingHint,isDecoration:!0}))}}function V(e){const{effectiveTheme:t}=e.view,r=i.A.toUnitRGBA(t.accentColor),o=[0,0,0,0];return{intersectionPointColor:o,intersectionPointOutlineColor:r,pointColor:o,pointOutlineColor:r,lineColor:r,lineOutlineColor:void 0,parallelSignColor:r,rightAngleColor:r,rightAngleColorDraped:i.A.toUnitRGBA((0,n._L)(t.accentColor,.5)),rightAngleOutlineColor:r}}function q(e,t,{selfSnappingZ:r,view:i,spatialReference:n}){return t&W.n.SELF&&(0,L.Ex)(e)&&null!=r?(0,L.FH)(e,r,i,n):e}function Q(e){return e.isDraped?c.Tq:c.qt}function X(e,t,r,i,n){const o=(0,a.vt)();if(n){const r=i.basemapTerrain.overlayManager.renderer.spatialReference;(0,l.F)(e,t,o,r)}else(0,B.XG)(e,t,r,i,o);return o}},61506:(e,t,r)=>{r.d(t,{AA:()=>y,L2:()=>w,PW:()=>b,U0:()=>S,iv:()=>O,mg:()=>D,ov:()=>R,xk:()=>z,z7:()=>I});r(3313);var i,n,o=r(23572),s=r(80347),a=r(19913),l=r(34561),c=r(87368),u=r(63918),d=r(74695),h=r(11631),p=r(19541),_=r(86300),m=r(57809),g=r(30165),f=r(72559),x=r(66019),v=r(1912);function y(e,t){return M(e,(()=>t))}function S(e){return M(e,(e=>e.plane))}function M(e,t){const r=(0,a.vt)(),i=(0,a.vt)();let n=!1;return s=>{const a=t(s);if("start"===s.action){const t=(0,o.WA)(s.screenStart,(0,o.PR)(h.oG.get())),i=(0,_.Z4)(e.state.camera,t,P);null!=i&&(n=(0,c.Ui)(a,i,r))}if(!n)return null;const l=(0,o.WA)(s.screenEnd,(0,o.PR)(h.oG.get())),u=(0,_.Z4)(e.state.camera,l,P);return null==u?null:(0,c.Ui)(a,u,i)?{...s,renderStart:r,renderEnd:i,plane:a,ray:u}:null}}function b(e,t,r,i=null,n=null){return function(e,t,r=0,i=null,n=null){let s=null;return a=>{if("start"===a.action&&(s=e.sceneIntersectionHelper.intersectElevationFromScreen((0,o.gs)(a.screenStart.x,a.screenStart.y),t,r,n),null!=s&&null!=i&&!(0,l.projectPoint)(s,s,i)))return null;if(null==s)return null;const c=e.sceneIntersectionHelper.intersectElevationFromScreen((0,o.gs)(a.screenEnd.x,a.screenEnd.y),t,r,n);return null==c||null!=i&&!(0,l.projectPoint)(c,c,i)?null:{...a,mapStart:s,mapEnd:c}}}(e,r,(0,p.id)(t,e,r),i,n)}function w(e,t,r,i){const n=r.toMap(e.screenStart);return null!=n?b(t,n,r.elevationInfo,i):null}function O(e,t,r){let i=null;const n=new x.rh;return n.next(y(e,function(e,t){const r=C,i=A,n=(0,c.vt)();e.renderCoordsHelper.worldUpAtPosition(t,r);const o=(0,s.b)((0,c.Qj)(n),r,(0,s.f)(i,t,e.state.camera.eye));return(0,s.b)(o,o,r),(0,c.O_)(t,o,n)}(e,t))).next(function(e,t){const r=(0,a.vt)(),i=(0,s.l)(t);e.renderCoordsHelper.worldUpAtPosition(t,r);const n=(0,a.vt)(),o=(0,a.vt)(),l=n=>((0,s.f)(n,n,t),(0,d._I)(r,n,n),"global"===e.viewingMode&&(0,s.l)(n)*Math.sign((0,s.m)(r,n))<.001-i&&(0,s.f)(n,(0,s.j)(n,r,.001),t),(0,s.g)(n,n,t),n);return e=>(e.renderStart=l((0,s.c)(n,e.renderStart)),e.renderEnd=l((0,s.c)(o,e.renderEnd)),e)}(e,t)).next(D(e,r)).next((e=>{e.mapEnd.x=e.mapStart.x,e.mapEnd.y=e.mapStart.y,i=e})),e=>(i=null,n.execute(e),i)}function R(e,t){const r=r=>{const i=(0,o.WA)(r,(0,o.PR)(h.oG.get())),n=(0,_.Z4)(e.state.camera,i,P);return null==n?null:(0,u.Zb)(t,n,C,A)[1]};return e=>{const t=r(e.screenStart);if(null==t)return null;const i=r(e.screenEnd);return null==i?null:{...e,renderStart:t,renderEnd:i}}}function D(e,t){const r=e.renderCoordsHelper;return e=>{const i=r.fromRenderCoords(e.renderStart,new v.A({spatialReference:t})),n=r.fromRenderCoords(e.renderEnd,new v.A({spatialReference:t}));return null!=i&&null!=n?{...e,mapStart:i,mapEnd:n}:null}}function I(e){let t=null;return r=>{switch(r.action){case"start":t=e.disableDisplay();break;case"end":case"cancel":null!=t&&(t.remove(),t=null)}return r}}function z(e,t=null){const r=(0,m.hz)(e.state.viewingMode);r.options.selectionMode=!0,r.options.store=g.oH.MIN,r.options.hud=!1;const n=(0,o.gs)(),s={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},l=(0,a.vt)(),c=t??e.spatialReference,u=t=>{e.map.ground&&e.map.ground.opacity<1?s.exclude.add(f.fo):s.exclude.delete(f.fo),e.sceneIntersectionHelper.intersectIntersectorScreen((0,o.WA)(t,n),r,s);const a=r.results.min;let u;if(a.getIntersectionPoint(l))u=a.intersector===g.dz.TERRAIN?i.GROUND:i.OTHER;else{if(!r.results.ground.getIntersectionPoint(l))return null;u=i.GROUND}return{location:e.renderCoordsHelper.fromRenderCoords(l,new v.A({spatialReference:c})),surfaceType:u}};let d;return e=>{if("start"===e.action){const t=u(e.screenStart);d=null!=t?t.location:null}if(null==d)return null;const t=u(e.screenEnd);return null!=t?.location?{...e,mapStart:d,mapEnd:t.location,surfaceType:t.surfaceType}:null}}(n=i||(i={}))[n.GROUND=0]="GROUND",n[n.OTHER=1]="OTHER";const C=(0,a.vt)(),A=(0,a.vt)(),P=(0,u.vt)()},83157:(e,t,r)=>{r.d(t,{l:()=>x});var i=r(4506),n=r(80347),o=r(19913),s=r(74772),a=r(76982),l=r(42722),c=r(46373),u=r(11631),d=r(87795),h=r(5822),p=r(93129),_=r(11519),m=r(74316),g=r(33763),f=r(21561);class x extends d.X{constructor(e){super(e),this._material=null,this._texture=null,this._geometry=null,this._size=3,this._color=(0,a.fA)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=(0,a.fA)(1,1,1,1),this._elevationInfo=null,this.applyProperties(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){const t=this._preferredTextureSize;this._size=e,t<this._preferredTextureSize?this.recreate():this._updateSizeAttribute()}}get color(){return this._color}set color(e){(0,s.a)(e,this._color)||((0,s.c)(this._color,e),this._updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this._updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,this.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,s.a)(e,this._outlineColor)||((0,s.c)(this._outlineColor,e),this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}_updateMaterial(){this._material&&this._material.setParameters(this._materialParameters)}_updateSizeAttribute(){const e=this.object;if(null==e)return;const t=e.geometries[0];if(null==t)return;const r=t.getMutableAttribute(g.r.SIZE).data,i=this._geometrySize;r[0]=i,r[1]=i,e.geometryVertexAttributeUpdated(e.geometries[0],g.r.SIZE)}get _materialParameters(){return{color:this._color,textureIsSignedDistanceField:!0,sampleSignedDistanceFieldTexelCenter:(0,_.ny)(this._primitive),distanceFieldBoundingBox:y,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:this._texture?.id,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled,isDecoration:this.isDecoration}}get _geometrySize(){return this._size/v}createExternalResources(){this._texture=(0,_.sZ)(this._primitive,this._preferredTextureSize),this._material=new f.R(this._materialParameters);const e=this.view._stage;this._texture.load(e.renderView.renderingContext),e.add(this._texture)}destroyExternalResources(){this._texture&&(this.view._stage.remove(this._texture),this._texture.dispose(),this._texture=null),this._material=null}createGeometries(e){const t=this._createRenderGeometry();null!=t&&e.addGeometry(t)}forEachExternalMaterial(e){this._material&&e(this._material)}get _preferredTextureSize(){return(0,i.qE)(2*this._geometrySize,16,128)}calculateMapBounds(e){const t=this.object?.geometries[0];if(!t)return!1;const r=t.attributes.get(g.r.POSITION).data;return(0,l.F)(r,this.view.renderCoordsHelper.spatialReference,S,this.view.spatialReference),(0,c.Hq)(e,S),!0}_createRenderGeometry(){const{geometry:e,_material:t}=this;if(null==e||null==t)return null;const{renderCoordsHelper:r,elevationProvider:i}=this.view,o=(0,h.nG)(e,i,p.F.fromElevationInfo(this.elevationInfo),r),s=(0,n.s)(u.rq.get(),e.x,e.y,o),a=u.rq.get();(0,l.F)(s,e.spatialReference,a,r.spatialReference);const c=this._geometrySize;return(0,m.DJ)(t,null,a,null,[c,c],[0,0,0,1])}}const v=_.CN,y=[v/2,v/2,1-v/2,1-v/2],S=(0,o.vt)()},57657:(e,t,r)=>{r.d(t,{n:()=>M});var i=r(61985),n=r(25336),o=r(26110),s=r(80347),a=r(19913),l=r(74772),c=r(76982),u=r(11631),d=r(82320),h=r(14788),p=r(14583),_=r(10941),m=r(53633),g=r(74316),f=r(31272),x=r(35537),v=r(33763),y=r(29239),S=r(16596);class M extends h.X{constructor(e){super(e),this._maxSize=0,this._position=(0,a.vt)(),this._up=(0,a.vt)(),this._right=(0,a.vt)(),this._renderOccluded=f.m$.OccludeAndTransparent,this._color=(0,c.fA)(1,0,0,1),this._outlineColor=(0,c.fA)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=f.m$.Opaque,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:()=>{},cameraChanged:()=>this._updateTransformObject3D()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:b}}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){(0,l.c)(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,l.c)(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:r}){this._maxSize=Math.min((0,s.p)(t,e),(0,s.p)(t,r))/3,(0,s.n)(this._up,(0,s.f)(this._up,e,t)),(0,s.n)(this._right,(0,s.f)(this._right,r,t)),(0,s.c)(this._position,t),this.recreateGeometry()}_createObject3DResources(e){const t=new y.v(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new S.W(this._outlineMaterialParameters);return this._createObject3DGeometries(e,t,r),{quadMaterial:t,outlineMaterial:r,forEach:e=>{e(t),r&&e(r)}}}_createObject3DGeometries(e,t,r){if((0,s.e)(this._up,a.uY)&&(0,s.e)(this._right,a.uY))return;const i=this._createGeometries(t,r);for(const t of i)e.addGeometry(t);this._updateTransformObject3D(e)}_createDrapedResources(){const e=new y.v(this._quadMaterialParameters),t=0===this._outlineSize?void 0:new S.W(this._outlineMaterialParameters),r=this._createGeometries(e,t).map((e=>new x.$(e)));return this._setTransformDraped(r),{quadMaterial:e,outlineMaterial:t,geometries:r,pixelRatioHandle:(0,i.wB)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}))}}_createGeometries(e,t){const{up:r,right:i,corner:n}=this._getVertices(),o=function(e,t,r,i){return new m.V(i,[[v.r.POSITION,new _.n([0,0,0,...t,...e,...r],[0,1,2,1,2,3],3,!0)]])}(r,i,n,e);return t?[o,(0,g.Z8)(t,[r,n,i])]:[o]}_getVertices(){let e=this._up,t=this._right;const r=(0,s.g)(u.rq.get(),e,t);return this.isDraped&&(e=(0,s.c)(u.rq.get(),e),t=(0,s.c)(u.rq.get(),t),e[2]=0,t[2]=0,r[2]=0),{up:e,right:t,corner:r}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(e=this.object3dResources.object){if(!e)return;const t=this.view.state.camera,r=this._size*t.computeScreenPixelSizeAt(this._position),i=Math.min(this._maxSize,r);(0,n.kN)(w,this._position),(0,n.hs)(w,w,[i,i,i]),e.transformation=w}_setTransformDraped(e){if(0===e.length)return;const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{_position:i,_size:o}=this,a=(0,s.c)(u.rq.get(),i);a[2]=p.bi;const l=O;l.spatialReference=t.renderer.spatialReference,l.x=a[0],l.y=a[1];const c=o*(this.view.overlayPixelSizeInMapUnits(l)*r),d=Math.min(this._maxSize,c);(0,n.kN)(w,a),(0,n.hs)(w,w,[d,d,1]);for(const t of e)t.transformation=w}get _quadMaterialParameters(){return{color:this._color,forceTransparentMode:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateQuadMaterial(){this.object3dResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters),this.drapedResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded,isDecoration:this.isDecoration}}_updateOutlineMaterial(){this.object3dResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters),this.drapedResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters)}}function b(e){e.pixelRatioHandle.remove(),e.geometries=[]}const w=(0,o.vt)(),O=(0,d.T)(0,0,void 0,null)},45101:(e,t,r)=>{r.d(t,{I:()=>m});var i=r(80347),n=r(19913),o=r(74772),s=r(76982),a=r(87795),l=r(93129),c=r(75644),u=r(5822);var d=r(10875),h=r(74316),p=r(31272),_=r(67703);class m extends a.X{constructor(e){super(e),this.view=null,this._renderOccluded=p.m$.OccludeAndTransparent,this._vertices=null,this._spatialReference=null,this._color=(0,s.ci)([1,127/255,0,1]),this._size=11,this._outlineColor=(0,s.ci)([0,0,0,.5]),this._outlineSize=1,this._elevationInfo=null,this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(e){this._vertices=e,this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(e){this._spatialReference=e,this.recreateGeometry()}get color(){return this._color}set color(e){(0,o.a)(e,this._color)||((0,o.c)(this._color,e),this._updateMaterial())}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,o.a)(e,this._outlineColor)||((0,o.c)(this._outlineColor,e),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,screenSizeScale:this.size,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){const e=this.vertices;if(null==e||0===e.length)return[];const t=function(e,t,r,i,n){const o=(0,c.jh)(3*e.length),s=(0,c.jh)(o.length);e.forEach(((e,t)=>{o[3*t]=e[0],o[3*t+1]=e[1],o[3*t+2]=e.length>2?e[2]:0}));const a=(0,u.au)(o,t,0,s,0,o,0,o.length/3,r,i,n),l=null!=a;return{numVertices:e.length,position:o,mapPositions:s,projectionSuccess:l,sampledElevation:a}}(e,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,l.F.fromElevationInfo(this.elevationInfo)),r=[],n=t.numVertices,o=t.position;for(let e=0;e<n;++e){const t=(0,i.s)(g,o[3*e],o[3*e+1],o[3*e+2]),n=f(this._vertexMaterial,.5,t),s=f(this._vertexOutlineMaterial,.5,t);r.push({vertexGeometry:n,vertexOutlineGeometry:s})}return r}createGeometries(e){const t=this._createRenderGeometries();for(const{vertexGeometry:r,vertexOutlineGeometry:i}of t)e.addGeometry(r),e.addGeometry(i)}createExternalResources(){this._vertexMaterial=new _.A({...this._vertexMaterialParameters,writeDepth:!0,cullFace:d.s2.Back,screenSizeEnabled:!0}),this._vertexOutlineMaterial=new _.A({...this._vertexOutlineMaterialParameters,forceTransparentMode:!0,writeDepth:!0,cullFace:d.s2.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexMaterial=null,this._vertexOutlineMaterial=null}forEachExternalMaterial(e){e(this._vertexMaterial),e(this._vertexOutlineMaterial)}}const g=(0,n.vt)();function f(e,t,r){return(0,h.CM)(e,t,16,16,{offset:r})}},73517:(e,t,r)=>{r.d(t,{A:()=>p});var i=r(82392),n=r(93814),o=r(73783),s=r(81482),a=(r(6273),r(80861),r(67498),r(26325)),l=(r(2980),r(18985));r(58133);const c={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let u=class extends o.A{get position(){return[this.x,this.y]}set position(e){this._set("x",e[0]),this._set("y",e[1])}get _textShadowColor(){const{textColor:e,backgroundColor:t}=this,r=t.clone();return r.a*=e.a,r}get _textShadow(){const e=this._textShadowColor.toCss(!0);return`0 0 ${this._textShadowSize}px ${e}`}get padding(){return.5*this.fontSize}get _borderRadius(){return this.padding}constructor(e){super(e),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.isDecoration=!0,this.backgroundColor=new n.A([0,0,0,.6]),this.textColor=new n.A([255,255,255]),this._textShadowSize=1}render(){return(0,l.h)("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(e){if(!this.visible)return;const t=e.font.replace(/^(.*?)px/,"");e.font=`${this.fontSize}px ${t}`;const r=this.padding,i=this._borderRadius,n=e.measureText(this.text).width,o=this.fontSize,s=d[this.anchor];e.textAlign="center",e.textBaseline="middle";const a=n+2*r,l=o+2*r,c=this.x+s.x*a,u=this.y+s.y*l;this._roundedRect(e,c,u,a,l,i),e.fillStyle=this.backgroundColor.toCss(!0),e.fill();const h=this.x+(s.x+.5)*a,p=this.y+(s.y+.5)*l;this._renderTextShadow(e,this.text,h,p),e.fillStyle=this.textColor.toCss(!0),e.fillText(this.text,h,p)}_renderTextShadow(e,t,r,i){e.lineJoin="miter",e.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/h.length})`;const n=this._textShadowSize;for(const[o,s]of h)e.fillText(t,r+n*o,i+n*s)}_roundedRect(e,t,r,i,n,o){e.beginPath(),e.moveTo(t,r+o),e.arcTo(t,r,t+o,r,o),e.lineTo(t+i-o,r),e.arcTo(t+i,r,t+i,r+o,o),e.lineTo(t+i,r+n-o),e.arcTo(t+i,r+n,t+i-o,r+n,o),e.lineTo(t+o,r+n),e.arcTo(t,r+n,t,r+n-o,o),e.closePath()}_cssClasses(){const e={"esri-text-overlay-item":!0};let t;for(t in c)e[c[t]]=this.anchor===t;return e}};(0,i._)([(0,s.MZ)()],u.prototype,"x",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"y",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"position",null),(0,i._)([(0,s.MZ)()],u.prototype,"text",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"fontSize",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"anchor",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"visible",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"isDecoration",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"backgroundColor",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"textColor",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"_textShadowSize",void 0),(0,i._)([(0,s.MZ)()],u.prototype,"_textShadowColor",null),(0,i._)([(0,s.MZ)()],u.prototype,"_textShadow",null),(0,i._)([(0,s.MZ)()],u.prototype,"padding",null),(0,i._)([(0,s.MZ)()],u.prototype,"_borderRadius",null),u=(0,i._)([(0,a.$)("esri.views.overlay.TextOverlayItem")],u);const d={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},h=[];{const e=16;for(let t=0;t<360;t+=360/e)h.push([Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)])}const p=u}}]);