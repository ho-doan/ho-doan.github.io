"use strict";(self.webpackChunkarcgis_node=self.webpackChunkarcgis_node||[]).push([[2134],{93766:(s,e,i)=>{i.d(e,{w:()=>h});var a=i(82392),t=i(70214),n=i(37623),l=i(61985),r=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),y=i(4197);const h=s=>{let e=class extends s{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,y.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const s=new AbortController,e=s.signal;this.addHandles((0,t.hA)((()=>s.abort()))),await(0,l.C_)((()=>this.view.defaultsFromMap?.heightModelInfoReady),e),(0,n.Te)(e);const i=(0,y.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return(0,a._)([(0,r.MZ)()],e.prototype,"view",void 0),(0,a._)([(0,r.MZ)()],e.prototype,"slicePlaneEnabled",void 0),e=(0,a._)([(0,o.$)("esri.views.3d.layers.LayerView3D")],e),e}},12134:(s,e,i)=>{i.r(e),i.d(e,{default:()=>u});var a=i(82392),t=i(3132),n=i(62991),l=i(57725),r=i(37623),o=i(61985),y=i(81482),h=i(26325),w=i(93766),d=i(24775);const c="analysis-view-handles";let p=class extends((0,w.w)(d.A)){constructor(s){super(s),this.type="line-of-sight-3d",this._analysisModule=null}initialize(){this.addHandles((0,o.wB)((()=>this.layer.analysis),(s=>{this._destroyAnalysisView(),null!=s&&this._createAnalysisView(s)}),o.pc),c)}destroy(){this.removeHandles(c),this._destroyAnalysisView()}async whenAnalysisView(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new n.A("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}_createAnalysisView(s){const e=(0,t.UT)((async i=>(this.analysisView=await this._createAnalysisViewPromise(s,i),this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null),this.analysisView)));this._createAnalysisViewTask=e}_destroyAnalysisView(){this.analysisView=(0,l.pR)(this.analysisView),this._createAnalysisViewTask=(0,l.DC)(this._createAnalysisViewTask)}async _createAnalysisViewPromise(s,e){let i=this._analysisModule;if(null==i){const s=await this._loadAnalysisModule();this._analysisModule=s,i=s}const a=new i.default({analysis:s,view:this.view,parent:this});if(await a.when(),(0,r.G4)(e))throw a.destroy(),new n.A("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:s});return a}_loadAnalysisModule(){return Promise.all([i.e(3243),i.e(2101),i.e(5351),i.e(6006)]).then(i.bind(i,16006))}};(0,a._)([(0,y.MZ)()],p.prototype,"type",void 0),(0,a._)([(0,y.MZ)()],p.prototype,"layer",void 0),(0,a._)([(0,y.MZ)()],p.prototype,"analysisView",void 0),(0,a._)([(0,y.MZ)()],p.prototype,"_createAnalysisViewTask",void 0),p=(0,a._)([(0,h.$)("esri.views.3d.layers.LineOfSightLayerView3D")],p);const u=p}}]);